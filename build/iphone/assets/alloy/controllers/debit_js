function __processArg(t,e){var i=null;return t&&(i=t[e]||null,delete t[e]),i}function Controller(){function t(t,e,i,o){var r=Alloy.Models.dummy;r.set({id:"1234",bal:t,totalspent:e,debitamount:i,lastdebit:o}),r.fetch(),console.log("debit.js :: stringify dummy :"+JSON.stringify(r))}function e(t){console.log("JSON stringify addHandler(e): "+JSON.stringify(t))}function o(t){console.log("JSON stringify setDate(e): "+JSON.stringify(t));var e=t.value;l.notes_textarea.datedebit=e;var i=e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()+" "+Alloy.Globals.formatAMPM(e);l.dateLabel.text=i}function r(t,e,i,o){console.log("debit.js::debitDetailAddRow: date: "+t+"  dateadded: "+e+" +dateadded: "+e);var r=Ti.UI.createTableViewRow({backgroundColor:"white",opacity:"0",color:"transparent",width:Ti.UI.SIZE,height:Ti.UI.SIZE}),n=Ti.UI.createLabel({color:"orange",font:{fontSize:10},right:"40",textAlign:"Ti.UI.TEXT_ALIGNMENT_LEFT",top:"10",text:e}),a=Ti.UI.createLabel({color:"#0F84DE",font:{fontSize:12},left:"20",textAlign:"Ti.UI.TEXT_ALIGNMENT_LEFT",top:"35",text:t.toLocaleString()}),s=Ti.UI.createLabel({color:"#333",font:{fontSize:24},left:"20",textAlign:"Ti.UI.TEXT_ALIGNMENT_LEFT",top:"50",text:i}),d=Ti.UI.createLabel({color:"#333",font:{fontSize:24},right:"50",textAlign:"Ti.UI.TEXT_ALIGNMENT_LEFT",top:"50",text:o}),c=Ti.UI.createImageView({left:"20",textAlign:"Ti.UI.TEXT_ALIGNMENT_LEFT",top:"30",width:"85%",height:"3",image:"blueline.png"}),_=Ti.UI.createView({width:"30%",height:"Ti.UI.Size",left:"60%",top:"40",backgroundColor:"white",borderRadius:"10",borderWidth:"0.1",borderColor:"white"});r.add(n),r.add(a),r.add(s),r.add(d),r.add(c),r.add(_),r.metadata=e;var u=Ti.UI.createTableView({backgroundColor:"white",separatorStyle:"Titanium.UI.iPhone.TableViewSeparatorStyle.NONE"});u.add(r),l.debit_table.appendRow(r)}function n(){var t=0;for(i=0;i<v.length;i++){r(v[i].col1,v[i].col2,v[i].col3,v[i].col4);var t=parseFloat(v[i].col4)+parseFloat(t);i==v.length-1&&(l.debit_window.lastdebit=v[i].col1)}return t}function a(t){console.log("JSON stringify notes_textarea(e): "+JSON.stringify(t)),l.notes_textarea.borderColor="#bbb"}function s(t){console.log("JSON stringify Done(e): "+JSON.stringify(t)),l.notes_textarea.blur()}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="debit",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var l=this,d={},c={};l.__views.debit_window=Ti.UI.createWindow({id:"debit_window",backgroundColor:"white",title:"Debit"}),l.__views.__alloyId14=Ti.UI.createButton({systemButton:Ti.UI.iPhone.SystemButton.ADD,id:"__alloyId14"}),e?l.addListener(l.__views.__alloyId14,"click",e):c["$.__views.__alloyId14!click!addHandler"]=!0,l.__views.debit_window.rightNavButton=l.__views.__alloyId14;var u=[];l.__views.input_view=Ti.UI.createView({id:"input_view",height:"300",backgroundColor:"white"}),l.__views.__alloyId18=Ti.UI.createImageView({top:"25",left:"20",image:"blueline.png",id:"__alloyId18"}),l.__views.input_view.add(l.__views.__alloyId18),l.__views.dateLabel=Ti.UI.createLabel({width:Ti.UI.SIZE,height:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,font:{fontFamily:"Helvetica",fontWeight:"normal"},id:"dateLabel",color:"red",top:"30",left:"20",text:"Date"}),l.__views.input_view.add(l.__views.dateLabel),l.__views.catLabel=Ti.UI.createLabel({width:Ti.UI.SIZE,height:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,font:{fontFamily:"Helvetica",fontWeight:"normal",fontSize:24},id:"catLabel",top:"55",left:"20",text:"Select Category"}),l.__views.input_view.add(l.__views.catLabel),l.__views.costLabel=Ti.UI.createLabel({width:Ti.UI.SIZE,height:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,font:{fontFamily:"Helvetica",fontWeight:"normal"},id:"costLabel",color:"blue",top:"55",left:"70%",text:"Cost"}),l.__views.input_view.add(l.__views.costLabel);var h=[];l.__views.donebutton=Ti.UI.createButton({id:"donebutton",title:"DONE"}),h.push(l.__views.donebutton),s?l.addListener(l.__views.donebutton,"click",s):c["$.__views.donebutton!click!Done"]=!0,l.__views.__alloyId19=Ti.UI.iOS.createToolbar({items:h,id:"__alloyId19"}),l.__views.notes_textarea=Ti.UI.createTextArea({font:{left:20,fontSize:24},keyboardToolbar:l.__views.__alloyId19,id:"notes_textarea",width:"100",left:"65%",height:"44",top:"45",borderWidth:"1",borderColor:"red",borderRadius:"5",color:"#888",textAlign:"left",value:" ",hintText:"100",keyboardType:Ti.UI.KEYBOARD_DECIMAL_PAD}),l.__views.input_view.add(l.__views.notes_textarea),a?l.addListener(l.__views.notes_textarea,"focus",a):c["$.__views.notes_textarea!focus!notesAreaFocus"]=!0,l.__views.__alloyId19=Ti.UI.iOS.createToolbar({keyboardToolbar:l.__views.__alloyId19,id:"notes_textarea",width:"100",left:"65%",height:"44",top:"45",borderWidth:"1",borderColor:"red",borderRadius:"5",color:"#888",textAlign:"left",value:" ",hintText:"100",keyboardType:Ti.UI.KEYBOARD_DECIMAL_PAD}),l.__views.date_picker=Ti.UI.createPicker({format24:!1,calendarViewShown:!1,id:"date_picker",top:"90",type:Titanium.UI.PICKER_TYPE_DATE_AND_TIME}),l.__views.input_view.add(l.__views.date_picker),o?l.addListener(l.__views.date_picker,"change",o):c["$.__views.date_picker!change!setDate"]=!0,l.__views.__alloyId16=Ti.UI.createTableViewSection({footerView:l.__views.input_view,headerTitle:"Please enter paid amount:",id:"__alloyId16"}),u.push(l.__views.__alloyId16),l.__views.debit_table=Ti.UI.createTableView({data:u,id:"debit_table",height:Ti.UI.FILL,separatorStyle:Titanium.UI.iPhone.TableViewSeparatorStyle.NONE,backgroundColor:"transparent",editable:"true",moveable:"true"}),l.__views.debit_window.add(l.__views.debit_table),l.__views.debit_tab=Ti.UI.createTab({window:l.__views.debit_window,id:"debit_tab",title:"Debit",icon:"debit.png"}),l.__views.debit_tab&&l.addTopLevelView(l.__views.debit_tab),d.destroy=function(){},_.extend(l,l.__views),d.openMainWindow=function(t){t.open(l.debit_window),Ti.API.info("This is child widow debit.js"+JSON.stringify(t))};var p=Titanium.App.Properties.getInt("bal",0),f=Titanium.App.Properties.getInt("totalspent",0),g=Titanium.App.Properties.getInt("totalcredit",0);l.debit_window.data={totalspent:f,totalcredit:g,debitamount:y,bal:p,lastdebit:T},l.debit_tab.addEventListener("focus",function(t){var e=Alloy.Globals.fetchingData("debitmodel");console.log("debit.js: tab focus: JSON.stringify(e)"+JSON.stringify(t)),console.log("debit.js::JSON stringify content after tab is focus: "+JSON.stringify(e));var i=n();Titanium.App.Properties.setInt("totalspent",i),console.log("debit.js: tab focus: totalspent"+i+" Titanium.App.Properties.getInt(totalspent): "+Titanium.App.Properties.setInt("totalspent"))});var v=Alloy.Globals.fetchingData("debitmodel");if(console.log("debit.js::JSON stringify content: "+JSON.stringify(v)),v.length>1)var T=v[v.length-1].col1,y=v[v.length-1].col4;else var T=0/0,y=0;console.log("debit.js::debitamount: "+y),l.debit_window.data={totalspent:f,totalcredit:g,debitamount:y,bal:p,lastdebit:T},t(p,f,y,T),l.catLabel.addEventListener("click",function(t){console.log("JSON stringify catLabel(e): "+JSON.stringify(t)),l.input_view.add(w),l.input_view.remove(l.date_picker)});var f=n();l.notes_textarea.totalspent=f,l.debit_window.data={totalspent:f,totalcredit:g,debitamount:y,bal:p,lastdebit:T},Titanium.App.Properties.setInt("totalspent",f),console.log("debit.js: after row display totalspent: "+f);var w=Ti.UI.createPicker({top:90}),m=[],b=[],b=["Book","Grocery","Transport","Fee","Stationary","Electronics","Travel"];for(i=0;i<b.length;i++)m=Ti.UI.createPickerRow({title:b[i],font:{fontSize:24}}),w.add(m);w.selectionIndicator=!0,l.catLabel.color="red",w.addEventListener("change",function(t){console.log("JSON stringify picker(e): "+JSON.stringify(t));var e=t.row.title;l.catLabel.text=e,l.notes_textarea.category=e,l.catLabel.color="blue"}),l.input_view.remove(l.date_picker),l.input_view.add(w),l.costLabel.addEventListener("click",function(t){console.log("JSON stringify costLabel(e): "+JSON.stringify(t)),l.input_view.remove(w),l.costTF.show()}),l.dateLabel.addEventListener("click",function(t){console.log("JSON stringify dateLabel(e): "+JSON.stringify(t)),l.input_view.add(l.date_picker),l.dateLabel.color="blue"}),l.notes_textarea.addEventListener("blur",function(e){if(console.log("JSON stringify notes_textarea blur(e): "+JSON.stringify(e)),e.source.datedebit)var i=e.source.datedebit,o=i.getMonth()+1+"/"+i.getDate()+"/"+i.getFullYear();else alert("Please select date");if(e.source.category?catselected=e.source.category:alert("Please select category"),e.value?amount=e.value.trim():alert("Please enter value"),o&&amount){r(o,o,catselected,amount),Alloy.Globals.updatemodelTable("debitmodel",o,o,catselected,amount,"0","0","0","0","0");var n=parseFloat(amount)+parseFloat(e.source.totalspent);console.log("debit.js: e.source.totalspent:  "+e.source.totalspent+" totalspent: "+n+" amount: "+amount),Titanium.App.Properties.setInt("totalspent",n);var a=parseFloat(Titanium.App.Properties.getInt("bal"))-parseFloat(amount);Titanium.App.Properties.setInt("bal",a),console.log("debit.js:: notes_textarea totalspent: "+n),l.debit_window.data={totalspent:n,totalcredit:g,debitamount:y,bal:a,lastdebit:T},l.notes_textarea.totalspent=n,console.log("updateDummy("+n+","+amount+","+o+")"),t(a,n,amount,o)}}),l.debit_window.addEventListener("close",function(e){console.log("debit.js: close window: JSON.stringify(e)"+JSON.stringify(e));var i=parseFloat(e.source.data.totalcredit)-parseFloat(e.source.data.totalspent);Titanium.App.Properties.setInt("bal",i),t(i,e.source.data.totalspent,e.source.data.debitamount,e.source.data.lastdebit)}),l.debit_tab.addEventListener("blur",function(t){console.log("debit.js: tab blur: JSON.stringify(e)"+JSON.stringify(t))}),c["$.__views.__alloyId14!click!addHandler"]&&l.addListener(l.__views.__alloyId14,"click",e),c["$.__views.donebutton!click!Done"]&&l.addListener(l.__views.donebutton,"click",s),c["$.__views.notes_textarea!focus!notesAreaFocus"]&&l.addListener(l.__views.notes_textarea,"focus",a),c["$.__views.date_picker!change!setDate"]&&l.addListener(l.__views.date_picker,"change",o),_.extend(l,d)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;