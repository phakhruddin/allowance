function __processArg(t,e){var i=null;return t&&(i=t[e]||null,delete t[e]),i}function Controller(){function t(){var t="https://spreadsheets.google.com/feeds/list/11zxiijjENT69g_97R8nvLZvv_hfBC1tdsJrJ6skNBVE/od6/public/basic?hl=en_US&alt=json",e="debitmodel";Alloy.Globals.updateType(t,e)}function e(){var t="1on0tH2DzdepwpCFWhpczS5qG3QO7BQJE-bGZCikzepg",e="https://spreadsheets.google.com/feeds/list/"+t+"/od6/public/basic?hl=en_US&alt=json",i="creditmodel";Alloy.Globals.updateType(e,i)}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="main",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var i=this,o={},a={};Alloy.Collections.instance("debitmodel"),Alloy.Models.instance("dummy"),i.__views.main_window=Ti.UI.createWindow({backgroundColor:"transparent",id:"main_window"});var r=[];i.__views.__alloyId40=Ti.UI.createTableViewSection({width:Ti.UI.SIZE,height:Ti.UI.SIZE,color:"green",backgroundColor:"transparent",font:{fontSize:"48",fontStyle:"bold"},headerTitle:"Name",id:"__alloyId40"}),r.push(i.__views.__alloyId40),i.__views.__alloyId41=Ti.UI.createTableViewRow({width:Ti.UI.SIZE,height:"100",font:{fontSize:"12",fontStyle:"bold",color:"orange"},color:"white",Title:"Identification",id:"__alloyId41"}),i.__views.__alloyId40.add(i.__views.__alloyId41),i.__views.date=Ti.UI.createLabel({width:Ti.UI.SIZE,height:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,font:{fontFamily:"Helvetica",fontWeight:"normal"},id:"date",color:"#404040",top:"10",text:" Sep 7, 2015"}),i.__views.__alloyId41.add(i.__views.date),i.__views.header=Ti.UI.createLabel({width:Ti.UI.SIZE,height:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,font:{fontFamily:"Helvetica",fontWeight:"normal",fontSize:"30",fontStyle:"bold"},color:"#404040",id:"header",top:"25",text:"Zachary Smith"}),i.__views.__alloyId41.add(i.__views.header),i.__views.studentid=Ti.UI.createLabel({width:Ti.UI.SIZE,height:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,font:{fontFamily:"Helvetica",fontWeight:"normal"},id:"studentid",color:"gray",top:"65",text:"123456789"}),i.__views.__alloyId41.add(i.__views.studentid),i.__views.__alloyId42=Ti.UI.createTableViewSection({width:Ti.UI.SIZE,height:Ti.UI.SIZE,color:"green",backgroundColor:"transparent",font:{fontSize:"48",fontStyle:"bold"},headerTitle:"Account Status",id:"__alloyId42"}),r.push(i.__views.__alloyId42),i.__views.__alloyId43=Ti.UI.createTableViewRow({width:Ti.UI.SIZE,height:"110",font:{fontSize:"12",fontStyle:"bold",color:"orange"},color:"white",Title:"Identification",id:"__alloyId43"}),i.__views.__alloyId42.add(i.__views.__alloyId43),i.__views.accountnumber=Ti.UI.createLabel({width:Ti.UI.SIZE,height:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,font:{fontFamily:"Helvetica",fontWeight:"normal"},id:"accountnumber",color:"#404040",top:"10",text:"Account #: A1232789"}),i.__views.__alloyId43.add(i.__views.accountnumber),i.__views.baltext=Ti.UI.createLabel({width:Ti.UI.SIZE,height:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,font:{fontFamily:"Helvetica",fontWeight:"normal"},id:"baltext",color:"#404040",top:"32",text:"BAL"}),i.__views.__alloyId43.add(i.__views.baltext),i.__views.balance=Ti.UI.createLabel({width:Ti.UI.SIZE,height:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,font:{fontFamily:"Helvetica",fontWeight:"normal",fontSize:"48",fontStyle:"bold"},id:"balance",color:"green",top:"46"}),i.__views.__alloyId43.add(i.__views.balance),i.__views.__alloyId44=Ti.UI.createTableViewSection({width:Ti.UI.SIZE,height:Ti.UI.SIZE,color:"green",backgroundColor:"transparent",font:{fontSize:"48",fontStyle:"bold"},headerTitle:"Last Credit",id:"__alloyId44"}),r.push(i.__views.__alloyId44),i.__views.__alloyId45=Ti.UI.createTableViewRow({width:Ti.UI.SIZE,height:"64",font:{fontSize:"12",fontStyle:"bold",color:"orange"},color:"white",Title:"lastcredit_row",id:"__alloyId45"}),i.__views.__alloyId44.add(i.__views.__alloyId45),e?i.addListener(i.__views.__alloyId45,"click",e):a["$.__views.__alloyId45!click!creditAction"]=!0,i.__views.creditamount=Ti.UI.createLabel({width:Ti.UI.SIZE,height:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,font:{fontFamily:"Helvetica",fontWeight:"normal",fontSize:"24"},id:"creditamount",color:"#333",top:"5"}),i.__views.__alloyId45.add(i.__views.creditamount),i.__views.lastcredit=Ti.UI.createLabel({width:Ti.UI.SIZE,height:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,font:{fontFamily:"Helvetica",fontWeight:"normal",fontSize:"12"},id:"lastcredit",color:"gray",top:"33"}),i.__views.__alloyId45.add(i.__views.lastcredit),i.__views.lastcredit_button=Ti.UI.createButton({id:"lastcredit_button",right:"60",image:"right242.png",width:"30",height:"30"}),i.__views.__alloyId45.add(i.__views.lastcredit_button),i.__views.__alloyId46=Ti.UI.createTableViewSection({width:Ti.UI.SIZE,height:Ti.UI.SIZE,color:"green",backgroundColor:"transparent",font:{fontSize:"48",fontStyle:"bold"},headerTitle:"Last Debit",id:"__alloyId46"}),r.push(i.__views.__alloyId46),i.__views.__alloyId47=Ti.UI.createTableViewRow({width:Ti.UI.SIZE,height:"64",font:{fontSize:"12",fontStyle:"bold",color:"orange"},color:"white",Title:"lastdebit_row",id:"__alloyId47"}),i.__views.__alloyId46.add(i.__views.__alloyId47),t?i.addListener(i.__views.__alloyId47,"click",t):a["$.__views.__alloyId47!click!debitAction"]=!0,i.__views.debitamount=Ti.UI.createLabel({width:Ti.UI.SIZE,height:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,font:{fontFamily:"Helvetica",fontWeight:"normal",fontSize:"24"},id:"debitamount",color:"#333",top:"5"}),i.__views.__alloyId47.add(i.__views.debitamount),i.__views.lastdebit=Ti.UI.createLabel({width:Ti.UI.SIZE,height:Ti.UI.SIZE,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,font:{fontFamily:"Helvetica",fontWeight:"normal",fontSize:"12"},id:"lastdebit",color:"gray",top:"33"}),i.__views.__alloyId47.add(i.__views.lastdebit),i.__views.lastdebit_button=Ti.UI.createButton({id:"lastdebit_button",right:"60",image:"right242.png",width:"30",height:"30"}),i.__views.__alloyId47.add(i.__views.lastdebit_button),i.__views.transaction_view=Ti.UI.createView({id:"transaction_view",height:"250",width:Ti.UI.Fill}),i.__views.__alloyId50=Alloy.createController("transaction",{id:"__alloyId50",__parentSymbol:i.__views.transaction_view}),i.__views.__alloyId50.setParent(i.__views.transaction_view),i.__views.__alloyId48=Ti.UI.createTableViewSection({width:Ti.UI.SIZE,height:Ti.UI.SIZE,color:"green",backgroundColor:"transparent",font:{fontSize:"48",fontStyle:"bold"},footerView:i.__views.transaction_view,headerTitle:"Last transactions",id:"__alloyId48"}),r.push(i.__views.__alloyId48),i.__views.__alloyId38=Ti.UI.createTableView({data:r,backgroundColor:"transparent",separatorStyle:Titanium.UI.iPhone.TableViewSeparatorStyle.NONE,id:"__alloyId38"}),i.__views.main_window.add(i.__views.__alloyId38),i.__views.main_tab=Ti.UI.createTab({font:{fontSize:"50dp",fontWeight:"bold",textStyle:Ti.UI.TEXT_STYLE_HEADLINE},width:Ti.UI.SIZE,height:Ti.UI.SIZE,window:i.__views.main_window,id:"main_tab",title:"Home",icon:"home.png"}),i.__views.main_tab&&i.addTopLevelView(i.__views.main_tab);var n=function(){i.balance.text=_.isFunction(Alloy.Models.dummy.transform)?Alloy.Models.dummy.transform().bal:_.template("<%=dummy.bal%>",{dummy:Alloy.Models.dummy.toJSON()}),i.creditamount.text=_.isFunction(Alloy.Models.dummy.transform)?Alloy.Models.dummy.transform().dcreditamount:_.template("<%=dummy.dcreditamount%>",{dummy:Alloy.Models.dummy.toJSON()}),i.lastcredit.text=_.isFunction(Alloy.Models.dummy.transform)?Alloy.Models.dummy.transform().lastcredit:_.template("last credit on: <%=dummy.lastcredit%>",{dummy:Alloy.Models.dummy.toJSON()}),i.debitamount.text=_.isFunction(Alloy.Models.dummy.transform)?Alloy.Models.dummy.transform().debitamount:_.template("<%=dummy.debitamount%>",{dummy:Alloy.Models.dummy.toJSON()}),i.lastdebit.text=_.isFunction(Alloy.Models.dummy.transform)?Alloy.Models.dummy.transform().lastdebit:_.template("Last Debit on: <%=dummy.lastdebit%>",{dummy:Alloy.Models.dummy.toJSON()})};Alloy.Models.dummy.on("fetch change destroy",n),o.destroy=function(){Alloy.Models.dummy.off("fetch change destroy",n)},_.extend(i,i.__views);var l=0,s=0,d=0,c=0,u=0,h=Alloy.Models.dummy;i.lastcredit_button.addEventListener("click",function(t){console.log("main.js:: JSON.stringify(e)"+JSON.stringify(t));var e=Alloy.createController("credit");e.openMainWindow(i.main_tab)}),i.lastdebit_button.addEventListener("click",function(t){console.log("main.js:: JSON.stringify(e)"+JSON.stringify(t));var e=Alloy.createController("debit");e.openMainWindow(i.main_tab)});var p=Alloy.Collections.instance("creditmodel");p.fetch();var f=p.toJSON();if(f.length>0)var g=f.length-1,d=f[g].col1,s=f[g].col3,d=f[g].col1;else var s=0,d=0/0;console.log("main.js: lastcredit: "+d+", creditamount: "+s);var y=Alloy.Collections.instance("debitmodel");y.fetch();var f=y.toJSON();if(f.length>0)var g=f.length-1,T=f[g].col1,v=f[g].col4,T=f[g].col1;else var v=0,T=0/0;console.log("main.js: lastdebit: "+T+", debitamount: "+v);var u=Titanium.App.Properties.getInt("totalcredit",0),c=Titanium.App.Properties.getInt("totalspent",0);console.log("main.js: totalcredit: "+u+", totalspent: "+c),l=Titanium.App.Properties.getInt("bal")?"NONE":parseFloat(u)-parseFloat(c),h.set({id:"1234",bal:l,dcreditamount:s,lastcredit:d,lastdebit:T,debitamount:v,totalspent:c,totalcredit:u}),h.fetch(),console.log("main.js:: stringify dummy :"+JSON.stringify(h)),a["$.__views.__alloyId45!click!creditAction"]&&i.addListener(i.__views.__alloyId45,"click",e),a["$.__views.__alloyId47!click!debitAction"]&&i.addListener(i.__views.__alloyId47,"click",t),_.extend(i,o)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;